#!/usr/bin/env zsh

local fav_path="$1"
file -z "$fav_path"
echo

if [[ -d $fav_path ]]; then
	${=FAV_DIR_PREVIEW_CMD} "$fav_path"
else
	case "$fav_path" in
		*.pdf)
			pdftotext "$fav_path" - | ${=FAV_FILE_PREVIEW_CMD}
			;;
		*.zip)
			unzip -l "$fav_path" | ${=FAV_FILE_PREVIEW_CMD}
			;;
		*.tar.gz)
			tar -ztvf "$fav_path" | ${=FAV_FILE_PREVIEW_CMD}
			;;
		*.tar.bz2)
			tar -jtvf "$fav_path" | ${=FAV_FILE_PREVIEW_CMD}
			;;
		*.tar.xz)
			tar -Jtvf "$fav_path" | ${=FAV_FILE_PREVIEW_CMD}
			;;
		*.tar)
			tar -tvf "$fav_path" | ${=FAV_FILE_PREVIEW_CMD}
			;;
		*)
			${=FAV_FILE_PREVIEW_CMD} "$fav_path"
			;;
	esac
fi
